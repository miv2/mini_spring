-- -----------------------------------------------------------------------------
-- Dummy Data (local development)
-- -----------------------------------------------------------------------------
-- 이 파일은 `src/main/resources/schema.sql`의 테이블 구조를 기준으로 작성되었습니다.
-- DB가 비어있는 상태에서 실행하는 것을 권장합니다. (UNIQUE/FK 제약으로 인해 중복 실행 시 실패할 수 있음)
--
-- 로컬 계정 비밀번호(BCrypt): Password123!
-- -----------------------------------------------------------------------------

-- 1) Member
INSERT INTO member (id, email, password_hash, name, nickname, oauth_provider, oauth_id, profile_image_url, role, status, created_at, updated_at)
VALUES
    (1, 'admin@example.com', '$2y$10$NJZ9YKtJ77tlWQJNEi4XoOlJ6rRPXNijX4x/MF4By.KJG4K0iz/ly', '관리자', 'admin', 'LOCAL', NULL, NULL, 'ADMIN', 'ACTIVE', '2026-01-01 10:00:00.000', '2026-01-01 10:00:00.000'),
    (2, 'user1@example.com', '$2y$10$NJZ9YKtJ77tlWQJNEi4XoOlJ6rRPXNijX4x/MF4By.KJG4K0iz/ly', '홍길동', 'gildong', 'LOCAL', NULL, 'https://picsum.photos/id/1011/200/200', 'USER', 'ACTIVE', '2026-01-02 10:00:00.000', '2026-01-02 10:00:00.000'),
    (3, 'user2@example.com', '$2y$10$NJZ9YKtJ77tlWQJNEi4XoOlJ6rRPXNijX4x/MF4By.KJG4K0iz/ly', '김개발', 'dev_kim', 'LOCAL', NULL, NULL, 'USER', 'ACTIVE', '2026-01-03 10:00:00.000', '2026-01-03 10:00:00.000'),
    (4, 'google.user@example.com', NULL, '구글 유저', 'google_user_001', 'GOOGLE', 'google-12345', 'https://picsum.photos/id/1005/200/200', 'USER', 'ACTIVE', '2026-01-04 10:00:00.000', '2026-01-04 10:00:00.000'),
    (5, 'kakao.user@example.com', NULL, '카카오 유저', 'kakao_user_001', 'KAKAO', 'kakao-98765', 'https://picsum.photos/id/1027/200/200', 'USER', 'ACTIVE', '2026-01-05 10:00:00.000', '2026-01-05 10:00:00.000'),
    (6, 'suspended@example.com', '$2y$10$NJZ9YKtJ77tlWQJNEi4XoOlJ6rRPXNijX4x/MF4By.KJG4K0iz/ly', '정지 계정', 'banned_user', 'LOCAL', NULL, NULL, 'USER', 'SUSPENDED', '2026-01-06 10:00:00.000', '2026-01-06 10:00:00.000');

-- 2) Post
INSERT INTO post (id, title, content, view_count, like_count, comment_count, is_published, member_id, created_at, updated_at)
VALUES
    (100, '첫 번째 게시글', 'mini_spring 더미 데이터입니다. 조회/댓글/좋아요/해시태그 흐름을 확인하기 위한 게시글입니다.', 12, 3, 4, TRUE, 2, '2026-01-10 09:00:00.000', '2026-01-10 09:00:00.000'),
    (101, 'Querydsl 페이징 예시', 'Querydsl + fetch join + 페이징 조회 테스트용 게시글입니다.', 4, 1, 2, TRUE, 3, '2026-01-11 09:00:00.000', '2026-01-11 09:00:00.000'),
    (102, '비공개 게시글(초안)', 'is_published=false 테스트용 게시글입니다.', 0, 0, 0, FALSE, 2, '2026-01-12 09:00:00.000', '2026-01-12 09:00:00.000'),
    (103, '탈퇴 사용자 게시글 예시', '작성자가 탈퇴하면 member_id가 NULL이 될 수 있습니다(ON DELETE SET NULL).', 1, 1, 1, TRUE, NULL, '2026-01-13 09:00:00.000', '2026-01-13 09:00:00.000'),
    (104, '스프링 시큐리티 가이드', 'JWT + OAuth2 동작 확인용 더미 게시글입니다.', 6, 2, 1, TRUE, 2, '2026-01-14 09:00:00.000', '2026-01-14 09:00:00.000'),
    (105, 'JPA 벌크 연산 정리', '조회/정렬 페이징 시나리오를 늘리기 위한 게시글입니다.', 8, 4, 2, TRUE, 3, '2026-01-15 09:00:00.000', '2026-01-15 09:00:00.000'),
    (106, '해시태그 인덱스 테스트', '해시태그 통계/정렬 테스트용 게시글입니다.', 3, 0, 0, TRUE, 4, '2026-01-16 09:00:00.000', '2026-01-16 09:00:00.000'),
    (107, '임시 비공개 초안', '초안 상태에서 공개 전 조회수를 확인하기 위한 더미.', 0, 0, 0, FALSE, 5, '2026-01-17 09:00:00.000', '2026-01-17 09:00:00.000');

-- 3) Hashtag
INSERT INTO hashtag (id, name, usage_count, created_at, last_used_at)
VALUES
    (10, 'spring', 2, '2026-01-01 00:00:00.000', '2026-01-13 09:00:00.000'),
    (11, 'java', 1, '2026-01-01 00:00:00.000', '2026-01-10 09:00:00.000'),
    (12, 'jpa', 1, '2026-01-01 00:00:00.000', '2026-01-11 09:00:00.000'),
    (13, 'querydsl', 2, '2026-01-01 00:00:00.000', '2026-01-13 09:00:00.000'),
    (14, 'oauth', 1, '2026-01-01 00:00:00.000', '2026-01-12 09:00:00.000'),
    (15, 'security', 1, '2026-01-01 00:00:00.000', '2026-01-14 09:00:00.000'),
    (16, 'draft', 1, '2026-01-01 00:00:00.000', '2026-01-17 09:00:00.000');

-- 4) PostHashtag (PK: post_id + hashtag_id)
INSERT INTO post_hashtag (post_id, hashtag_id)
VALUES
    (100, 10),
    (100, 11),
    (100, 13),
    (101, 10),
    (101, 12),
    (102, 14),
    (103, 13),
    (104, 10),
    (104, 15),
    (105, 12),
    (105, 13),
    (105, 10),
    (106, 13),
    (106, 15),
    (107, 16);

-- 5) Comment (depth: 0=댓글, 1=대댓글 / parent_comment_id + depth 제약을 준수해야 합니다)
INSERT INTO comment (id, content, member_id, post_id, parent_comment_id, depth, is_deleted, created_at, updated_at)
VALUES
    (1000, '좋은 글이네요!', 3, 100, NULL, 0, FALSE, '2026-01-10 10:00:00.000', '2026-01-10 10:00:00.000'),
    (1001, '감사합니다 :)', 2, 100, 1000, 1, FALSE, '2026-01-10 10:05:00.000', '2026-01-10 10:05:00.000'),

    -- 부모 댓글이 삭제되어도 대댓글은 남는 시나리오(소프트 삭제)
    (1002, '삭제된 댓글입니다.', 5, 100, NULL, 0, TRUE, '2026-01-10 11:00:00.000', '2026-01-10 11:00:00.000'),
    (1003, '부모가 삭제되어도 답글은 남아요.', 4, 100, 1002, 1, FALSE, '2026-01-10 11:10:00.000', '2026-01-10 11:10:00.000'),

    (1010, '페이징 정렬이 잘 되네요.', 2, 101, NULL, 0, FALSE, '2026-01-11 10:00:00.000', '2026-01-11 10:00:00.000'),
    (1011, '동의합니다!', 4, 101, 1010, 1, FALSE, '2026-01-11 10:03:00.000', '2026-01-11 10:03:00.000'),

    -- 탈퇴/알 수 없는 사용자 댓글(member_id=NULL)
    (1030, '작성자 정보가 없어도 댓글은 남을 수 있어요.', NULL, 103, NULL, 0, FALSE, '2026-01-13 10:00:00.000', '2026-01-13 10:00:00.000');



-- 6) PostLike (PK: member_id + post_id)
INSERT INTO post_like (member_id, post_id)
VALUES
    (3, 100),
    (4, 100),
    (5, 100),
    (2, 101),
    (2, 103),
    (4, 104),
    (3, 105),
    (2, 105),
    (5, 106),
    (2, 106);

-- 7) PostView (PK: member_id + post_id / last_viewed_at NOT NULL)
INSERT INTO post_view (member_id, post_id, last_viewed_at, view_count)
VALUES
    (2, 100, '2026-01-10 12:00:00.000', 5),
    (3, 100, '2026-01-10 12:30:00.000', 4),
    (4, 100, '2026-01-10 13:00:00.000', 3),
    (2, 101, '2026-01-11 12:00:00.000', 2),
    (5, 101, '2026-01-11 12:10:00.000', 2),
    (2, 103, '2026-01-13 12:00:00.000', 1),
    (2, 104, '2026-01-14 12:00:00.000', 2),
    (3, 104, '2026-01-14 12:10:00.000', 2),
    (2, 105, '2026-01-15 12:00:00.000', 3),
    (4, 105, '2026-01-15 12:10:00.000', 2),
    (5, 105, '2026-01-15 12:20:00.000', 1),
    (2, 106, '2026-01-16 12:00:00.000', 1),
    (5, 106, '2026-01-16 12:05:00.000', 1);

-- refresh_token은 실제 JWT 서명/만료 검증이 필요하므로 더미 데이터로는 생성하지 않습니다.
